<!DOCTYPE html>
<meta charset="UTF-8">
<title>留言板</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui}
body{background:#f5f7fa}
.container{max-width:800px;margin:0 auto;padding:20px}
.card{background:#fff;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.06);padding:20px;margin-bottom:20px}
input,textarea{width:100%;padding:12px;border:1px solid #eee;border-radius:8px;margin-bottom:12px}
button{background:#409eff;color:#fff;border:none;padding:12px;border-radius:8px;width:100%;cursor:pointer}
.msg{padding:16px;border-bottom:1px solid #f2f2f2}
.msg:last-child{border-bottom:none}
.info{color:#999;font-size:12px;margin-top:6px}
.page{text-align:center;margin:20px 0}
.page a{padding:6px 12px;border:1px solid #eee;border-radius:6px;margin:0 4px;text-decoration:none;color:#333}
.top{text-align:right;margin-bottom:10px}
.top a{color:#409eff;text-decoration:none;margin-left:15px}
</style>

<div class="container">
  <div class="top">
    {% if user %}
      您好,{{ user }} | <a href="/admin">管理</a> | <a href="/logout">退出</a>
    {% else %}
      <a href="/login">登录</a> | <a href="/register">注册</a>
    {% endif %}
  </div>

  <div class="card">
    <h2 style="margin-bottom:16px">留言板</h2>
    <input id="name" placeholder="昵称">
    <textarea id="content" rows="4" placeholder="请输入留言"></textarea>
    <button onclick="submitMsg()">发布留言</button>
  </div>

  {% for m in messages %}
  <div class="card">
    {{ m.content }}
    <div class="info">{{ m.name }} • {{ m.time }}</div>
  </div>
  {% endfor %}

  <div class="page">
    {% if page > 1 %}
    <a href="/page/{{ page-1 }}">上一页</a>
    {% endif %}
    <span>{{ page }} / {{ pages }}</span>
    {% if page < pages %}
    <a href="/page/{{ page+1 }}">下一页</a>
    {% endif %}
  </div>
</div>

<script src="/static/script.js"></script>
